<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Elevator Escape â€“ Demo</title>

<style>
body{
  margin:0;
  background:#0b1020;
  color:#e5e7eb;
  font-family:system-ui, sans-serif;
}
#game{
  max-width:1100px;
  margin:auto;
  padding:10px;
}
#scene{
  position:relative;
  width:100%;
  aspect-ratio:16/9;
  background:#1e293b; /* Raum-Platzhalter */
  border-radius:12px;
  overflow:hidden;
}
.hotspot{
  position:absolute;
  cursor:pointer;
}
#zoom{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.8);
  display:none;
  justify-content:center;
  align-items:center;
}
#zoomContent{
  position:relative;
  width:80%;
  height:80%;
  background:#334155;
  border-radius:10px;
}
.zoomItem{
  position:absolute;
  background:#22c55e;
  padding:6px;
  border-radius:6px;
  cursor:pointer;
}
#back{
  position:absolute;
  bottom:10px;
  left:10px;
  background:#000;
  padding:8px;
  border-radius:20px;
  cursor:pointer;
}
#inventory{
  display:flex;
  gap:10px;
  padding:10px;
}
.item{
  width:50px;
  height:50px;
  background:#475569;
  border-radius:6px;
  display:flex;
  justify-content:center;
  align-items:center;
  cursor:pointer;
}
.item.selected{
  outline:3px solid #2dd4bf;
}
#msg{
  padding:8px;
  color:#94a3b8;
}
</style>
</head>

<body>
<div id="game">
  <div id="scene">
    <!-- Hotspots -->
    <div class="hotspot" style="left:55%;top:60%;width:20%;height:15%" onclick="openZoom('box')"></div>
    <div class="hotspot" style="left:70%;top:25%;width:20%;height:50%" onclick="useElevator()"></div>
    <div class="hotspot" style="left:40%;top:30%;width:10%;height:30%" onclick="openPanel()"></div>

    <!-- Zoom -->
    <div id="zoom">
      <div id="zoomContent">
        <div id="zoomItems"></div>
        <div id="back" onclick="closeZoom()">â¬‡ ZurÃ¼ck</div>
      </div>
    </div>
  </div>

  <div id="inventory"></div>
  <div id="msg">Untersuche den Raum.</div>
</div>

<script>
let inventory=[];
let selected=null;
let powerOn=false;
let panelSeq=[];
const correctSeq=[3,1,2];

function msg(t){document.getElementById("msg").textContent=t;}

function addItem(name){
  inventory.push(name);
  renderInv();
}

function renderInv(){
  const inv=document.getElementById("inventory");
  inv.innerHTML="";
  inventory.forEach(i=>{
    const d=document.createElement("div");
    d.className="item"+(selected===i?" selected":"");
    d.textContent=i;
    d.onclick=()=>{selected=(selected===i?null:i);renderInv();}
    inv.appendChild(d);
  });
}

function openZoom(type){
  const z=document.getElementById("zoom");
  const zi=document.getElementById("zoomItems");
  zi.innerHTML="";
  z.style.display="flex";

  if(type==="box"){
    msg("Eine Kiste.");
    zi.innerHTML+=`
      <div class="zoomItem" style="left:20%;top:40%" onclick="pickup('Key')">ðŸ”‘ SchlÃ¼ssel</div>
      <div class="zoomItem" style="left:60%;top:40%" onclick="pickup('Note')">ðŸ“„ Zettel (3)</div>`;
  }

  if(type==="panel"){
    msg("Ein Zahlenpanel.");
    [1,2,3].forEach(n=>{
      const b=document.createElement("div");
      b.className="zoomItem";
      b.style.left=(20+n*15)+"%";
      b.style.top="40%";
      b.textContent=n;
      b.onclick=()=>press(n);
      zi.appendChild(b);
    });
  }
}

function closeZoom(){
  document.getElementById("zoom").style.display="none";
}

function pickup(i){
  if(!inventory.includes(i)){
    addItem(i);
    msg(i+" aufgenommen.");
  }
}

function openPanel(){
  if(selected!=="Key"){msg("Das Panel ist verschlossen.");return;}
  openZoom("panel");
}

function press(n){
  panelSeq.push(n);
  msg("GedrÃ¼ckt: "+panelSeq.join("-"));
  if(panelSeq.length===3){
    if(JSON.stringify(panelSeq)===JSON.stringify(correctSeq)){
      powerOn=true;
      msg("Strom aktiviert!");
      closeZoom();
    }else{
      msg("Falsche Reihenfolge.");
      panelSeq=[];
    }
  }
}

function useElevator(){
  if(!powerOn){msg("Der Aufzug hat keinen Strom.");return;}
  msg("ðŸŽ‰ Du bist entkommen!");
}
</script>
</body>
</html>
