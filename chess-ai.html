<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ArcadeOwl - Chess AI</title>
<style>
:root {
    --blue: #0b74de;
    --muted: #666;
    --card: #ffffff;
    --max-width: 980px;
}
html, body {height:100%;margin:0;font-family:system-ui, -apple-system, "Segoe UI", Roboto, Arial;background:#f5f7fb;color:#111;}
/* Topbar */
.topbar{
    background:var(--blue);
    color:#fff;
    height:56px;
    display:flex;
    align-items:center;
    justify-content:center;
    position:relative;
    box-shadow:0 2px 6px rgba(11,115,222,0.06);
    padding:0 12px;
}
.home-link{
    position:absolute;
    left:12px;
    top:50%;
    transform:translateY(-50%);
    color:#fff;
    text-decoration:none;
    font-size:20px;
    opacity:0.8;
}
.brand {
    display:flex;
    align-items:center;
    gap:10px;
    font-weight:800;
    letter-spacing:0.6px;
    font-size:20px;
}
.brand img {height:34px; width:auto; border-radius:8px;}
/* main wrap */
.wrap{max-width:var(--max-width); margin:18px auto; padding:12px; text-align:center;}
/* Level buttons */
.level-btns {display:flex; justify-content:center; gap:10px; margin-bottom:15px;}
.level-btns button {
    background:var(--blue); color:#fff; border:none; padding:8px 14px;
    border-radius:8px; cursor:pointer; font-weight:700; transition: transform 0.2s;
}
.level-btns button:hover {transform: scale(1.1);}
#chessBoard {display:grid; grid-template-columns: repeat(8, 60px); grid-template-rows: repeat(8, 60px); margin:20px auto; border:3px solid #333; border-radius:8px; overflow:hidden;}
.square {width:60px; height:60px; display:flex; align-items:center; justify-content:center; font-size:32px; cursor:pointer; transition: background 0.3s;}
.square.light {background:#f0d9b5;}
.square.dark {background:#b58863;}
.square.highlight {background:yellow;}
.status {margin-top:15px; font-size:18px;}
button#reset {margin-top:15px; padding:8px 12px; border-radius:8px; border:none; background:var(--blue); color:#fff; font-weight:700; cursor:pointer;}
</style>
</head>
<body>

<header class="topbar">
    <a class="home-link" href="index.html">←</a>
    <div class="brand">
        <img src="logo.png" alt="ArcadeOwl Logo">
        <span>ArcadeOwl</span>
    </div>
</header>

<main class="wrap">
    <div class="level-btns">
        <button onclick="setLevel('easy')">Easy</button>
        <button onclick="setLevel('medium')">Medium</button>
        <button onclick="setLevel('hard')">Hard</button>
        <button onclick="setLevel('veryhard')">Very Hard</button>
        <button onclick="setLevel('expert')">Expert</button>
    </div>
    <div id="chessBoard"></div>
    <div class="status" id="status">Select a level to start the game!</div>
    <div style="margin-top:10px;">
        Moves: <span id="moves">0</span> | Time: <span id="timer">0</span>s | Best Score: <span id="bestScore">0</span>
    </div>
    <button id="reset" onclick="resetGame()">New Game</button>
</main>

<script>
// Pieces unicode
const pieces = { 
    'wp':'♙','wr':'♖','wn':'♘','wb':'♗','wq':'♕','wk':'♔',
    'bp':'♟','br':'♜','bn':'♞','bb':'♝','bq':'♛','bk':'♚'
};
let board = [], selected = null, currentPlayer = 'white';
let movesCount = 0, timer = 0, timerInterval = null;
let bestScore = localStorage.getItem('chessBest') || 0;
document.getElementById('bestScore').textContent = bestScore;
let aiLevel = 'easy';

function setLevel(level) {
    aiLevel = level;
    resetGame();
}

function createBoard() {
    const boardElement = document.getElementById('chessBoard');
    boardElement.innerHTML = '';
    for(let r=0;r<8;r++){
        for(let c=0;c<8;c++){
            const sq = document.createElement('div');
            sq.className = 'square '+((r+c)%2===0?'light':'dark');
            sq.dataset.row = r; sq.dataset.col = c;
            sq.addEventListener('click', ()=>selectSquare(r,c));
            boardElement.appendChild(sq);
        }
    }
}

function resetGame() {
    initBoard();
    movesCount=0;
    timer=0;
    clearInterval(timerInterval);
    timerInterval=setInterval(()=>{timer++;document.getElementById('timer').textContent=timer;},1000);
    document.getElementById('moves').textContent=movesCount;
    updateBoard();
    document.getElementById('status').textContent='Your turn!';
}

function initBoard(){
    board=[
        ['br','bn','bb','bq','bk','bb','bn','br'],
        ['bp','bp','bp','bp','bp','bp','bp','bp'],
        ['','','','','','','',''],
        ['','','','','','','',''],
        ['','','','','','','',''],
        ['','','','','','','',''],
        ['wp','wp','wp','wp','wp','wp','wp','wp'],
        ['wr','wn','wb','wq','wk','wb','wn','wr']
    ];
    currentPlayer='white';
    selected=null;
}

function updateBoard(){
    for(let r=0;r<8;r++){
        for(let c=0;c<8;c++){
            const sq = document.querySelector(`.square[data-row="${r}"][data-col="${c}"]`);
            sq.textContent = board[r][c]?pieces[board[r][c]]:'';
            sq.classList.remove('highlight');
        }
    }
}

function selectSquare(r,c){
    if(currentPlayer==='black'){return;} // wait AI
    const piece = board[r][c];
    if(selected){
        // attempt move
        if(isValidMove(selected.r,selected.c,r,c)){
            makeMove(selected.r,selected.c,r,c);
            selected=null;
            currentPlayer='black';
            movesCount++;
            document.getElementById('moves').textContent=movesCount;
            updateBoard();
            setTimeout(aiMove,300);
        } else { selected=null; updateBoard(); }
    } else if(piece && piece.startsWith('w')){
        selected={r,c};
        const sq = document.querySelector(`.square[data-row="${r}"][data-col="${c}"]`);
        sq.classList.add('highlight');
    }
}

// Simplified valid move check for pawns & king/rook/knight for demo
function isValidMove(r1,c1,r2,c2){
    const p = board[r1][c1];
    if(!p) return false;
    // Pawn simple move
    if(p==='wp'){
        if(r2===r1-1 && c1===c2 && !board[r2][c2]) return true;
        if(r2===r1-1 && Math.abs(c2-c1)===1 && board[r2][c2] && board[r2][c2].startsWith('b')) return true;
    }
    // King one step any direction
    if(p==='wk'){return Math.abs(r2-r1)<=1 && Math.abs(c2-c1)<=1 && (!board[r2][c2] || board[r2][c2].startsWith('b'));}
    // Knight
    if(p==='wn'){
        const dr=Math.abs(r2-r1), dc=Math.abs(c2-c1);
        return (dr===2 && dc===1 || dr===1 && dc===2) && (!board[r2][c2] || board[r2][c2].startsWith('b'));
    }
    return false;
}

function makeMove(r1,c1,r2,c2){
    board[r2][c2]=board[r1][c1];
    board[r1][c1]='';
}

function aiMove(){
    // Very simple AI based on level
    const moves=[];
    for(let r=0;r<8;r++){
        for(let c=0;c<8;c++){
            const p=board[r][c];
            if(p && p.startsWith('b')){
                // find all simple valid moves (like pawns forward)
                if(p==='bp'){
                    if(r<7 && !board[r+1][c]) moves.push({r1:r,c1:c,r2:r+1,c2:c});
                }
            }
        }
    }
    if(moves.length>0){
        let move;
        if(aiLevel==='easy') move=moves[Math.floor(Math.random()*moves.length)];
        else move=moves[0]; // simple deterministic for higher level
        makeMove(move.r1,move.c1,move.r2,move.c2);
    }
    currentPlayer='white';
    updateBoard();
}

// Save best score
function saveBestScore(){
    if(movesCount<bestScore || bestScore===0){
        bestScore=movesCount;
        localStorage.setItem('chessBest',bestScore);
        document.getElementById('bestScore').textContent=bestScore;
    }
}

createBoard();
resetGame();
</script>
</body>
</html>
