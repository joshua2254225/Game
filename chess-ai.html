<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ArcadeOwl - Chess AI</title>
<link rel="stylesheet" href="https://unpkg.com/chessboard-element@1.5.0/dist/chessboard-element-bundle.min.css">
<style>
:root {--blue:#0b74de;--card:#fff;--max-width:980px;}
body {font-family:system-ui, -apple-system, "Segoe UI", Roboto, Arial; background:#f5f7fb; margin:0; color:#111;}
.topbar{background:var(--blue); color:#fff; height:56px; display:flex; align-items:center; justify-content:center; position:relative; box-shadow:0 2px 6px rgba(11,115,222,0.06);}
.home-link{position:absolute; left:12px; top:50%; transform:translateY(-50%); color:#fff; text-decoration:none; font-size:20px; opacity:0.8;}
.brand{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:0.6px; font-size:20px;}
.brand img{height:34px;width:auto;border-radius:8px;}
.wrap{max-width:var(--max-width);margin:18px auto;padding:12px;text-align:center;}
.level-btns {display:flex; justify-content:center; gap:10px; margin-bottom:15px;}
.level-btns button {background:var(--blue); color:#fff; border:none; padding:8px 14px; border-radius:8px; cursor:pointer; font-weight:700; transition: transform 0.2s;}
.level-btns button:hover {transform:scale(1.1);}
#status{margin-top:10px;font-size:18px;}
button#reset {margin-top:15px; padding:8px 12px; border-radius:8px; border:none; background:var(--blue); color:#fff; font-weight:700; cursor:pointer;}
</style>
</head>
<body>

<header class="topbar">
  <a class="home-link" href="index.html">‚Üê</a>
  <div class="brand">
    <img src="logo.png" alt="ArcadeOwl Logo">
    <span>ArcadeOwl</span>
  </div>
</header>

<main class="wrap">
  <div class="level-btns">
    <button onclick="setLevel('easy')">Easy</button>
    <button onclick="setLevel('medium')">Medium</button>
    <button onclick="setLevel('hard')">Hard</button>
  </div>
  <chess-board id="board" style="width:480px; margin:auto;"></chess-board>
  <div id="status">Select a level to start the game!</div>
  <div style="margin-top:10px;">
    Moves: <span id="moves">0</span> | Time: <span id="timer">0</span>s | Best Score: <span id="bestScore">0</span>
  </div>
  <button id="reset" onclick="resetGame()">New Game</button>
</main>

<script type="module">
import Chess from 'https://cdn.jsdelivr.net/npm/chess.js@1.0.0-beta.3/dist/chess.min.js';
const boardEl = document.querySelector('#board');
let game = new Chess();
let movesCount = 0, timer = 0, timerInterval = null;
let bestScore = localStorage.getItem('chessBest') || 0;
document.getElementById('bestScore').textContent = bestScore;
let aiLevel = 'easy';

function setLevel(level){
    aiLevel = level;
    resetGame();
}

function resetGame(){
    game.reset();
    movesCount = 0;
    timer = 0;
    clearInterval(timerInterval);
    timerInterval = setInterval(()=>{timer++; document.getElementById('timer').textContent = timer;},1000);
    document.getElementById('moves').textContent = movesCount;
    document.getElementById('status').textContent = 'Your turn!';
    boardEl.position(game.fen());
}

function makeMove(from,to){
    const move = game.move({from, to, promotion:'q'});
    if(move){
        movesCount++;
        document.getElementById('moves').textContent = movesCount;
        boardEl.position(game.fen());
        if(game.game_over()){
            document.getElementById('status').textContent = game.in_checkmate() ? 'You won!' : 'Draw!';
            saveBestScore();
            clearInterval(timerInterval);
        } else {
            document.getElementById('status').textContent = "AI thinking...";
            setTimeout(aiMove, 500);
        }
    }
}

function aiMove(){
    let moves = game.moves();
    if(moves.length === 0) return;
    let move;
    if(aiLevel==='easy'){
        move = moves[Math.floor(Math.random()*moves.length)]; // random move
    } else if(aiLevel==='medium'){
        move = moves[Math.floor(Math.random()*moves.length*0.7)]; // slightly better
    } else {
        // Hard: pick first legal move (can integrate simple evaluation)
        move = moves[0];
    }
    game.move(move);
    boardEl.position(game.fen());
    document.getElementById('status').textContent='Your turn!';
}

function saveBestScore(){
    if(movesCount<bestScore || bestScore==0){
        bestScore=movesCount;
        localStorage.setItem('chessBest',bestScore);
        document.getElementById('bestScore').textContent=bestScore;
    }
}

// Handle board clicks
boardEl.addEventListener('chessboard-drop',(e)=>{
    const {from,to} = e.detail;
    makeMove(from,to);
});

resetGame();
</script>
<script type="module" src="https://unpkg.com/chess-board-element@1.5.0/dist/chessboard-element-bundle.min.js"></script>

</body>
</html>
