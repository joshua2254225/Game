<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Geometry Dash — ArcadeOwl</title>

<style>
html,body{
  margin:0;
  background:#0b0f1a;
  font-family:system-ui,Arial;
  overflow:hidden;
}

.topbar{
  height:52px;
  background:#0b74de;
  color:white;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
  position:relative;
}
.topbar a{
  position:absolute;
  left:12px;
  color:white;
  text-decoration:none;
  font-size:20px;
  opacity:.7;
}

canvas{
  display:block;
  margin:0 auto;
  background:linear-gradient(#0b0f1a,#12172b);
}

.hud{
  position:absolute;
  top:60px;
  left:50%;
  transform:translateX(-50%);
  color:white;
  font-weight:700;
  text-align:center;
}
</style>
</head>

<body>

<header class="topbar">
  <a href="index.html">←</a>
  ArcadeOwl Geometry Dash
</header>

<div class="hud">
  Score: <span id="score">0</span><br>
  Best: <span id="best">0</span>
</div>

<canvas id="game" width="900" height="400"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const GRAVITY = 0.9;
const JUMP_FORCE = -14;
const SPEED = 6;

let cube = {
  x:120,
  y:0,
  size:30,
  vy:0,
  grounded:false
};

const groundY = canvas.height - 60;
let obstacles = [];
let score = 0;
let best = localStorage.getItem("gdBest") || 0;
document.getElementById("best").textContent = best;

let holdingJump = false;
let running = true;

/* CREATE OBSTACLES */
function spawnObstacle(){
  const height = 30 + Math.random()*30;
  obstacles.push({
    x:canvas.width + 40,
    w:30,
    h:height
  });
}

/* INPUT */
function jump(){
  if(cube.grounded){
    cube.vy = JUMP_FORCE;
    cube.grounded = false;
  }
}
window.addEventListener("keydown",e=>{
  if(e.code==="Space"){
    holdingJump=true;
    jump();
  }
});
window.addEventListener("keyup",e=>{
  if(e.code==="Space") holdingJump=false;
});
canvas.addEventListener("touchstart",()=>{
  holdingJump=true;
  jump();
});
canvas.addEventListener("touchend",()=>holdingJump=false);

/* GAME LOOP */
function update(){
  if(!running) return;

  ctx.clearRect(0,0,canvas.width,canvas.height);

  // ground
  ctx.fillStyle="#222";
  ctx.fillRect(0,groundY,canvas.width,60);

  // cube physics
  if(holdingJump && cube.vy < 0) cube.vy -= 0.3;
  cube.vy += GRAVITY;
  cube.y += cube.vy;

  if(cube.y + cube.size >= groundY){
    cube.y = groundY - cube.size;
    cube.vy = 0;
    cube.grounded = true;
  }

  // draw cube
  ctx.fillStyle="#00f0ff";
  ctx.shadowColor="#00f0ff";
  ctx.shadowBlur=15;
  ctx.fillRect(cube.x,cube.y,cube.size,cube.size);
  ctx.shadowBlur=0;

  // obstacles
  ctx.fillStyle="#ff004c";
  obstacles.forEach(o=>{
    o.x -= SPEED;
    ctx.fillRect(o.x,groundY-o.h,o.w,o.h);

    // collision
    if(
      cube.x < o.x+o.w &&
      cube.x+cube.size > o.x &&
      cube.y+cube.size > groundY-o.h
    ){
      gameOver();
    }
  });

  obstacles = obstacles.filter(o=>o.x>-60);

  // score
  score++;
  document.getElementById("score").textContent = score;

  // spawn timing
  if(score % 90 === 0){
    spawnObstacle();
  }

  requestAnimationFrame(update);
}

function gameOver(){
  running=false;
  if(score > best){
    best = score;
    localStorage.setItem("gdBest",best);
  }

  ctx.fillStyle="rgba(0,0,0,0.6)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  ctx.fillStyle="white";
  ctx.font="bold 36px Arial";
  ctx.textAlign="center";
  ctx.fillText("Game Over",canvas.width/2,canvas.height/2-20);
  ctx.font="20px Arial";
  ctx.fillText("Tap or Press Space to Restart",canvas.width/2,canvas.height/2+20);

  document.getElementById("best").textContent = best;

  function restart(){
    obstacles=[];
    score=0;
    cube.y=0;
    cube.vy=0;
    running=true;
    update();
    window.removeEventListener("keydown",restartKey);
    canvas.removeEventListener("touchstart",restartTouch);
  }
  function restartKey(e){ if(e.code==="Space") restart(); }
  function restartTouch(){ restart(); }

  window.addEventListener("keydown",restartKey);
  canvas.addEventListener("touchstart",restartTouch);
}

update();
</script>

</body>
</html>
