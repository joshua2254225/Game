<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dash Runner</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    margin: 0;
    background: #0f172a;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    color: white;
    font-family: Arial, sans-serif;
  }

  canvas {
    background: linear-gradient(#020617, #020617);
    border: 3px solid #2563eb;
  }

  #ui {
    position: absolute;
    top: 10px;
    left: 10px;
    font-size: 18px;
  }
</style>
</head>

<body>

<div id="ui">Score: <span id="score">0</span></div>
<canvas id="game" width="600" height="300"></canvas>

<script>
/* =====================
   BASIC SETUP
===================== */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const scoreEl = document.getElementById("score");

const GROUND_Y = 260; // <-- sichtbarer Boden

/* =====================
   PLAYER
===================== */
let player = {
  x: 80,
  y: GROUND_Y - 30, // <-- korrekt auf Boden
  size: 30,
  vy: 0,
  gravity: 1.2,
  jump: -18,
  grounded: true
};

/* =====================
   OBSTACLES
===================== */
let obstacles = [];
let obstacleTimer = 0;

/* =====================
   GAME STATE
===================== */
let score = 0;
let gameOver = false;

/* =====================
   INPUT
===================== */
function jump() {
  if (player.grounded && !gameOver) {
    player.vy = player.jump;
    player.grounded = false;
  }
}

document.addEventListener("keydown", e => {
  if (e.code === "Space") jump();
});

canvas.addEventListener("touchstart", jump);

/* =====================
   GAME LOOP
===================== */
function loop() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // --- DRAW GROUND ---
  ctx.fillStyle = "#1e293b";
  ctx.fillRect(0, GROUND_Y, canvas.width, 4);

  // --- PLAYER PHYSICS ---
  player.vy += player.gravity;
  player.y += player.vy;

  if (player.y >= GROUND_Y - player.size) {
    player.y = GROUND_Y - player.size;
    player.vy = 0;
    player.grounded = true;
  }

  // --- DRAW PLAYER ---
  ctx.fillStyle = "#22c55e";
  ctx.fillRect(player.x, player.y, player.size, player.size);

  // --- OBSTACLE SPAWN ---
  obstacleTimer++;
  if (obstacleTimer > 90) {
    obstacles.push({
      x: canvas.width,
      y: GROUND_Y - 20,
      w: 20,
      h: 20
    });
    obstacleTimer = 0;
  }

  // --- OBSTACLES ---
  ctx.fillStyle = "#ef4444";
  for (let i = obstacles.length - 1; i >= 0; i--) {
    let o = obstacles[i];
    o.x -= 6;
    ctx.fillRect(o.x, o.y, o.w, o.h);

    // COLLISION
    if (
      player.x < o.x + o.w &&
      player.x + player.size > o.x &&
      player.y < o.y + o.h &&
      player.y + player.size > o.y
    ) {
      gameOver = true;
    }

    if (o.x < -50) obstacles.splice(i, 1);
  }

  // --- SCORE ---
  if (!gameOver) {
    score++;
    scoreEl.textContent = score;
  } else {
    ctx.fillStyle = "white";
    ctx.font = "30px Arial";
    ctx.fillText("GAME OVER", 190, 150);
    ctx.font = "16px Arial";
    ctx.fillText("Reload to restart", 220, 175);
  }

  requestAnimationFrame(loop);
}

loop();
  </script>
</body>
</html>
