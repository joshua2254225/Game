<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Pro Live Editor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/theme/dracula.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/hint/show-hint.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/xml/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/hint/show-hint.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/hint/html-hint.min.js"></script>

    <style>
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: #282a36; color: white; display: flex; flex-direction: column; height: 100vh; }
        .toolbar { padding: 10px; background: #44475a; display: flex; justify-content: space-between; align-items: center; }
        
        .run-btn { 
            background: #50fa7b; border: none; padding: 10px 25px; border-radius: 4px; 
            cursor: pointer; font-weight: bold; font-size: 16px; transition: 0.2s;
        }
        .run-btn:hover { background: #40c060; transform: scale(1.05); }

        .editor-container { display: flex; flex: 1; height: 50%; }
        .CodeMirror { width: 50%; height: 100%; font-size: 14px; border-right: 1px solid #6272a4; }
        
        #preview { width: 100%; height: 50%; background: white; border: none; }
        .label { position: absolute; z-index: 10; background: #6272a4; padding: 2px 8px; font-size: 10px; }
    </style>
</head>
<body>

<div class="toolbar">
    <span>Mein Code Editor (Strg + Leer für Vorschläge)</span>
    <button class="run-btn" onclick="updatePreview()">▶ RUN</button>
</div>

<div class="editor-container">
    <textarea id="html-code"><h1>Hallo Welt!</h1>
<p>Tippe hier und klicke auf Run.</p></textarea>
    <textarea id="css-code">h1 { color: purple; }</textarea>
</div>

<iframe id="preview"></iframe>

<script>
    // Initialisiere CodeMirror für HTML
    const htmlEditor = CodeMirror.fromTextArea(document.getElementById("html-code"), {
        mode: "text/html",
        theme: "dracula",
        lineNumbers: true,
        extraKeys: {"Ctrl-Space": "autocomplete"} // Vorschläge mit Strg+Leer
    });

    // Initialisiere CodeMirror für CSS
    const cssEditor = CodeMirror.fromTextArea(document.getElementById("css-code"), {
        mode: "css",
        theme: "dracula",
        lineNumbers: true,
        extraKeys: {"Ctrl-Space": "autocomplete"}
    });

    function updatePreview() {
        const html = htmlEditor.getValue();
        const css = `<style>${cssEditor.getValue()}</style>`;
        const preview = document.getElementById("preview").contentWindow.document;
        
        preview.open();
        preview.write(html + css);
        preview.close();
    }

    // Automatische Vorschläge beim Tippen (optional)
    htmlEditor.on("inputRead", function(editor) {
        if (!editor.state.completionActive) {
            CodeMirror.commands.autocomplete(editor, null, {completeSingle: false});
        }
    });

    // Erstes Mal laden
    updatePreview();
</script>

</body>
</html>
