<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Monkey Jump</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  margin:0;
  font-family:sans-serif;
  background: linear-gradient(to top,#87cefa,#f0e68c);
  overflow:hidden;
}

#gameContainer {
  position:relative;
  width:100%;
  max-width:600px;
  height:400px;
  margin:50px auto;
  background:#8fd4a1;
  border-radius:16px;
  overflow:hidden;
  border:4px solid #555;
}

.monkey {
  position:absolute;
  bottom:50px;
  left:50px;
  width:50px;
  height:50px;
  background:#ffcc00;
  border-radius:50%;
  transition: bottom 0.2s;
}

.obstacle {
  position:absolute;
  bottom:0;
  width:40px;
  height:40px;
  background:#d9534f;
  border-radius:8px;
}

#score {
  text-align:center;
  font-size:22px;
  margin-top:10px;
  font-weight:bold;
}

#highscore {
  text-align:center;
  font-size:16px;
  margin-top:4px;
  color:#555;
}

</style>
</head>
<body>

<div id="gameContainer">
  <div class="monkey" id="monkey"></div>
</div>
<div id="score">Score: 0</div>
<div id="highscore">Highscore: 0</div>

<script>
const container = document.getElementById('gameContainer');
const monkey = document.getElementById('monkey');
const scoreEl = document.getElementById('score');
const highscoreEl = document.getElementById('highscore');

let monkeyY = 50;
let isJumping = false;
let gravity = 2;
let obstacles = [];
let score = 0;
let highscore = localStorage.getItem('monkeyHighscore') || 0;
highscoreEl.textContent = "Highscore: "+highscore;

function jump() {
  if (isJumping) return;
  isJumping = true;
  let jumpHeight = 0;
  const jumpInterval = setInterval(()=>{
    if(jumpHeight >= 80){
      clearInterval(jumpInterval);
      fall();
    } else {
      jumpHeight += 8;
      monkeyY += 8;
      monkey.style.bottom = monkeyY+"px";
    }
  },20);
}

function fall(){
  const fallInterval = setInterval(()=>{
    if(monkeyY <= 50){
      monkeyY = 50;
      monkey.style.bottom = monkeyY+"px";
      isJumping = false;
      clearInterval(fallInterval);
    } else {
      monkeyY -= gravity;
      monkey.style.bottom = monkeyY+"px";
    }
  },20);
}

// Obstacles
function createObstacle(){
  const obs = document.createElement('div');
  obs.classList.add('obstacle');
  obs.style.left = container.offsetWidth + 'px';
  
  // Random height for fun
  let height = Math.floor(Math.random()*30)+30;
  obs.style.height = height+'px';
  obs.style.width = height+'px';
  
  container.appendChild(obs);
  obstacles.push(obs);
}

function moveObstacles(){
  obstacles.forEach((obs,index)=>{
    let currentX = parseInt(obs.style.left);
    currentX -= 6; // speed
    obs.style.left = currentX+'px';
    
    // Collision detection
    let obsTop = parseInt(obs.style.bottom)+parseInt(obs.style.height);
    if(parseInt(obs.style.left) < 100 && parseInt(obs.style.left)+parseInt(obs.style.width) > 50){
      if(monkeyY < parseInt(obs.style.height)){
        alert('Game Over! Score: '+score);
        if(score>highscore){
          localStorage.setItem('monkeyHighscore',score);
          highscore=score;
        }
        location.reload();
      }
    }

    if(currentX + parseInt(obs.style.width) < 0){
      obs.remove();
      obstacles.splice(index,1);
      score++;
      scoreEl.textContent = "Score: "+score;
      if(score>highscore) highscoreEl.textContent="Highscore: "+score;
    }
  });
}

document.addEventListener('keydown',e=>{
  if(e.code==='Space') jump();
});
document.addEventListener('touchstart',jump);

setInterval(()=>{
  if(Math.random()<0.02){ // 2% chance each frame
    createObstacle();
  }
  moveObstacles();
},20);

</script>
</body>
</html>
