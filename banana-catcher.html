<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Banana Catcher</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  margin:0;
  font-family:sans-serif;
  background: linear-gradient(to bottom,#f0e68c,#87ceeb);
  overflow:hidden;
}

#gameContainer {
  position:relative;
  width:100%;
  max-width:600px;
  height:500px;
  margin:30px auto;
  background:#a3d9a5;
  border-radius:16px;
  border:4px solid #555;
  overflow:hidden;
}

#basket {
  position:absolute;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  width:80px;
  height:40px;
  background:#ff9900;
  border-radius:12px;
}

.falling {
  position:absolute;
  width:30px;
  height:30px;
  border-radius:50%;
}

.banana {
  background:yellow;
}

.bomb {
  background:red;
}

#score {
  text-align:center;
  font-size:22px;
  font-weight:bold;
  margin-top:10px;
}

#highscore {
  text-align:center;
  font-size:16px;
  color:#555;
}
</style>
</head>
<body>

<div id="gameContainer">
  <div id="basket"></div>
</div>

<div id="score">Score: 0</div>
<div id="highscore">Highscore: 0</div>

<script>
const container = document.getElementById('gameContainer');
const basket = document.getElementById('basket');
const scoreEl = document.getElementById('score');
const highscoreEl = document.getElementById('highscore');

let basketX = container.offsetWidth/2 - 40;
basket.style.left = basketX+"px";

let fallingObjects = [];
let score = 0;
let highscore = localStorage.getItem('bananaHighscore') || 0;
highscoreEl.textContent = "Highscore: "+highscore;

// Basket movement
document.addEventListener('keydown', e=>{
  if(e.key==='ArrowLeft') moveBasket(-20);
  if(e.key==='ArrowRight') moveBasket(20);
});

document.addEventListener('touchmove', e=>{
  let touchX = e.touches[0].clientX - container.getBoundingClientRect().left;
  basketX = Math.min(Math.max(touchX - 40,0), container.offsetWidth - 80);
  basket.style.left = basketX + "px";
});

function moveBasket(delta){
  basketX = Math.min(Math.max(basketX + delta,0), container.offsetWidth - 80);
  basket.style.left = basketX + "px";
}

// Create falling object
function createFalling(){
  const obj = document.createElement('div');
  const type = Math.random()<0.8 ? 'banana':'bomb';
  obj.classList.add('falling', type);
  obj.style.left = Math.random()*(container.offsetWidth-30)+'px';
  obj.style.top = '-30px';
  container.appendChild(obj);
  fallingObjects.push({el:obj,type:type});
}

// Move objects
function moveObjects(){
  fallingObjects.forEach((obj,index)=>{
    let top = parseInt(obj.el.style.top);
    top += 4; // speed
    obj.el.style.top = top+'px';

    // Collision with basket
    const objX = parseInt(obj.el.style.left);
    if(top + 30 >= container.offsetHeight - 60 &&
       objX + 30 > basketX && objX < basketX + 80){
      if(obj.type==='banana'){
        score++;
        scoreEl.textContent = "Score: "+score;
      } else {
        alert("Game Over! Score: "+score);
        if(score>highscore){
          localStorage.setItem('bananaHighscore',score);
        }
        location.reload();
      }
      obj.el.remove();
      fallingObjects.splice(index,1);
      return;
    }

    // Remove if falls out
    if(top>container.offsetHeight){
      obj.el.remove();
      fallingObjects.splice(index,1);
    }
  });
}

// Game loop
setInterval(()=>{
  if(Math.random()<0.03) createFalling(); // new object chance
  moveObjects();
},20);

</script>
</body>
</html>
