<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Les Animaux ‚Äì RO ‚áÑ FR</title>

<style>
  * { box-sizing: border-box; transition: all 0.3s ease; }

  body {
    background: linear-gradient(135deg, #74ebd5, #acb6e5);
    background-attachment: fixed;
    font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    margin: 0;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #2d3436;
  }

#startScreen {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
}

.start-card {
  background: white;
  padding: 30px;
  border-radius: 20px;
  text-align: center;
  width: 90%;
  max-width: 350px;
}

 
  .card {
    background: rgba(255, 255, 255, 0.95);
    width: 92%;
    max-width: 420px;
    padding: 35px 25px;
    border-radius: 24px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.15);
    text-align: center;
    backdrop-filter: blur(10px);
  }

  h1 { margin-top: 0; font-size: 28px; color: #4a6cf7; }

  #question {
    font-size: 22px;
    margin: 25px 0;
    line-height: 1.5;
  }

  #question b {
    font-size: 28px;
    color: #2d3436;
    display: block;
    margin-top: 5px;
  }

  input {
    width: 100%;
    padding: 15px;
    font-size: 18px;
    border-radius: 12px;
    border: 2px solid #dfe6e9;
    text-align: center;
    background: #f9f9f9;
  }

  input:focus {
    outline: none;
    border-color: #4a6cf7;
    background: #fff;
    box-shadow: 0 0 10px rgba(74, 108, 247, 0.1);
  }

  /* Prim√§rer Button */
  #checkBtn, .restart-btn {
    width: 100%;
    margin-top: 15px;
    padding: 15px;
    font-size: 18px;
    font-weight: bold;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    background: #4a6cf7;
    color: white;
    box-shadow: 0 4px 12px rgba(74, 108, 247, 0.3);
  }

  #checkBtn:active, .restart-btn:active { transform: scale(0.98); }

  #result {
    margin-top: 20px;
    font-size: 20px;
    font-weight: bold;
    min-height: 30px;
  }

  .stats-container {
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid #eee;
    display: flex;
    justify-content: space-between;
    font-size: 14px;
    color: #636e72;
  }

  .modes {
    margin-top: 25px;
    display: flex;
    gap: 10px;
  }

  .modes button {
    flex: 1;
    padding: 10px;
    font-size: 14px;
    border: 1px solid #dfe6e9;
    border-radius: 8px;
    background: #fff;
    cursor: pointer;
    color: #636e72;
  }

  .modes button.active {
    background: #4a6cf7;
    color: white;
    border-color: #4a6cf7;
  }

  /* Animation f√ºr richtige/falsche Antwort */
  .shake { animation: shake 0.4s; }
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-8px); }
    75% { transform: translateX(8px); }
  }
</style>
</head>

<body>


 <div id="startScreen">
  <div class="start-card">
    <h2>üêæ Les Animaux</h2>
    <p>Alege modul »ôi apasƒÉ START</p>
    <button onclick="startGame()">‚ñ∂Ô∏è START</button>
  </div>
 </div>

<div class="card">
  <h1 id="title">üê∂ Les Animaux</h1>

  <div id="game-area">
    <div id="question"></div>
    <input id="answer" placeholder="Scrie rƒÉspunsul" autocomplete="off">
    <button id="checkBtn">VerificƒÉ</button>
    <div id="result"></div>
  </div>

  <div class="stats-container">
    <div id="score">‚úîÔ∏è 0 | ‚ùå 0</div>
    <div id="timer">‚è±Ô∏è 0s</div>
  </div>
 <button id="audioBtn">üîä AscultƒÉ</button>

  <div class="modes">
    <button id="btn-ro-fr" class="active" onclick="setMode('ro-fr')">RO ‚Üí FR</button>
    <button id="btn-fr-ro" onclick="setMode('fr-ro')">FR ‚Üí RO</button>
  </div>
</div>

<script>
const animals = [    
  { ro: "c√¢ine", fr: "chien" },    
  { ro: "pisicƒÉ", fr: "chat" },    
  { ro: "cal", fr: "cheval" },    
  { ro: "vacƒÉ", fr: "vache" },    
  { ro: "oaie", fr: "mouton" },    
  { ro: "porcu»ôor de Guineea", fr: "cochon d'Inde" },    
  { ro: "iepure", fr: "lapin" },    
  { ro: "pasƒÉre", fr: "oiseau" },    
  { ro: "buburuzƒÉ", fr: "coccinelle" },    
  { ro: "pinguin", fr: "pingouin" },    
  { ro: "raton", fr: "raton" },    
  { ro: "panda", fr: "panda" },    
  { ro: "maimu»õƒÉ", fr: "singe" },    
  { ro: "gorilƒÉ", fr: "gorille" },    
  { ro: "jirafƒÉ", fr: "girafe" },    
  { ro: "arici", fr: "h√©risson" },    
  { ro: "bufni»õƒÉ", fr: "hibou" },    
  { ro: "crab", fr: "crabe" },    
  { ro: "ra»õƒÉ", fr: "canard" },    
  { ro: "hipopotam", fr: "hippopotame" },    
  { ro: "pe»ôte", fr: "poisson" },    
  { ro: "urs", fr: "ours" },    
  { ro: "lup", fr: "loup" },    
  { ro: "delfin", fr: "dauphin" },    
  { ro: "broascƒÉ »õestoasƒÉ", fr: "tortue" },
  { ro: "vulpe", fr: "renard" },
  { ro: "koala", fr: "koala" },
  { ro: "pelican", fr: "p√©lican" },
  { ro: "cameleon", fr: "cam√©l√©on" }, // Korrigiert
  { ro: "veveri»õƒÉ", fr: "√©cureuil" }  // Komma davor erg√§nzt
];


let mode = "ro-fr";
let pool = [];
let correctCount = 0;
let wrongCount = 0;
 let attemptPerQuestion = 0; // Z√§hlt die Versuche f√ºr die aktuelle Frage

let current;
let time = 0;
let timer;

const answer = document.getElementById("answer");
const question = document.getElementById("question");
const result = document.getElementById("result");
const scoreBox = document.getElementById("score");
const timerBox = document.getElementById("timer");
const gameArea = document.getElementById("game-area");

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
 }

 function normalize(text) {
  return text
    .toLowerCase()
    .normalize("NFD")
    .replace(/[\u0300-\u036f]/g, "");
 }

function startTimer() {
  clearInterval(timer);
  timer = setInterval(() => {
    time++;
    timerBox.textContent = "‚è±Ô∏è " + time + "s";
  }, 1000);
}

function newQuestion() {
  if (pool.length === 0) {
    showEndScreen();
    return;
  }

  current = pool.pop();
  answer.value = "";
  result.textContent = "";
  answer.style.borderColor = "#dfe6e9";

  question.innerHTML = mode === "ro-fr" 
    ? "Scrie √Æn francezƒÉ: <b>" + current.ro + "</b>" 
    : "Scrie √Æn rom√¢nƒÉ: <b>" + current.fr + "</b>";

  setTimeout(() => answer.focus(), 50);
}
 document.getElementById("audioBtn").onclick = () => {
  if (!current) return;
  if (mode === "ro-fr") {
    speak(current.fr, "fr-FR");
  } else {
    speak(current.ro, "ro-RO");
  }
};


function check() {
  if (!current) return;
  const input = normalize(answer.value.trim());
const correct = normalize(mode === "ro-fr" ? current.fr : current.ro);

if (input === correct) {

  if (input === correct.toLowerCase()) {
    // RICHTIG
    result.style.color = "#27ae60";
    result.textContent = "‚úîÔ∏è Excelent!";
    answer.style.borderColor = "#27ae60";
    correctCount++;
    attemptPerQuestion = 0; // Reset f√ºr die n√§chste Frage
    
    scoreBox.textContent = "‚úîÔ∏è " + correctCount + " | ‚ùå " + wrongCount;
    
    const currentBtn = document.getElementById("checkBtn");
    currentBtn.disabled = true;
    setTimeout(() => {
      currentBtn.disabled = false;
      newQuestion();
    }, 1200);

  } else {
    // FALSCH
    wrongCount++; // Fehler z√§hlt sofort
    attemptPerQuestion++; // Erh√∂ht die Versuche f√ºr diese Frage
    scoreBox.textContent = "‚úîÔ∏è " + correctCount + " | ‚ùå " + wrongCount;
    
    document.querySelector('.card').classList.add('shake');
    setTimeout(() => document.querySelector('.card').classList.remove('shake'), 400);

    if (attemptPerQuestion === 1) {
      // Erster Fehler
      result.style.color = "#f39c12"; // Orange f√ºr "fast richtig"
      result.textContent = "‚ùå Mai √ÆncearcƒÉ o datƒÉ!";
      answer.value = ""; // Feld leeren f√ºr neuen Versuch
      answer.focus();
    } else {
      // Zweiter Fehler
      result.style.color = "#e74c3c"; // Rot
      result.textContent = "‚ùå Corect era: " + correct;
      attemptPerQuestion = 0; // Reset f√ºr die n√§chste Frage
      
      const currentBtn = document.getElementById("checkBtn");
      currentBtn.disabled = true;
      setTimeout(() => {
        currentBtn.disabled = false;
        newQuestion();
      }, 2000); // Etwas l√§nger zeigen, damit man die Antwort lesen kann
    }
  }
}


  

function showEndScreen() {
  clearInterval(timer);
  gameArea.innerHTML = `
    <div style="font-size: 50px; margin-bottom: 10px;">üèÜ</div>
    <h2>Gata!</h2>
    <p>Ai terminat √Æn <b>${time} secunde</b>.</p>
    <p style="color: #27ae60">‚úîÔ∏è Corecte: ${correctCount}</p>
    <p style="color: #e74c3c">‚ùå Gre»ôite: ${wrongCount}</p>
    <button class="restart-btn" onclick="resetGame()">Joc Nou</button>
  `;
}

function resetGame() {
  location.reload(); // Einfachste Art f√ºr einen sauberen Neustart
}

function setMode(m) {
  mode = m;
  document.getElementById("btn-ro-fr").classList.toggle("active", m === 'ro-fr');
  document.getElementById("btn-fr-ro").classList.toggle("active", m === 'fr-ro');
  attemptPerQuestion = 0;

  // Falls das Spiel schon lief, neu starten
  correctCount = 0;
  wrongCount = 0;
  time = 0;
  pool = shuffle([...animals]);
  scoreBox.textContent = "‚úîÔ∏è 0 | ‚ùå 0";
  startTimer();
  newQuestion();
}

// Event Listeners
document.getElementById("checkBtn").onclick = check;
answer.addEventListener("keydown", e => { if (e.key === "Enter") check(); });

// Initialer Start
pool = shuffle([...animals]);
function startGame() {
  document.getElementById("startScreen").style.display = "none";
  pool = shuffle([...animals]);
  startTimer();
  newQuestion();
 }


 function speak(text, lang) {
  const utterance = new SpeechSynthesisUtterance(text);
  utterance.lang = lang;
  utterance.rate = 0.9;
  utterance.pitch = 1;
  speechSynthesis.cancel();
  speechSynthesis.speak(utterance);
 }
</script>

</body>
</html>
