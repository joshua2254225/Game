<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Emoji Memory</title>

  <!-- AdSense loader (optional) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1154368264564805"
     crossorigin="anonymous"></script>

  <style>
    :root{
      --blue:#0b74de;
      --panel:#fafafa;
      --muted:#666;
      --max-width:960px;
    }
    html,body{height:100%;margin:0;font-family:system-ui, -apple-system, "Segoe UI", Roboto, Arial;background:#f5f7fb;color:#111}
    /* top bar */
    .topbar{
      background:var(--blue);
      color:#fff;
      height:56px;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      box-shadow:0 2px 6px rgba(11,115,222,0.06);
      padding:0 12px;
      font-weight:800;
      font-size:20px;
    }
    .home-link{
      position:absolute;
      left:12px;
      top:50%;
      transform:translateY(-50%);
      color:#fff;
      text-decoration:none;
      font-size:20px;
      opacity:0.6;
    }

    main{max-width:var(--max-width);margin:18px auto;padding:12px}
    .card{background:var(--panel);padding:16px;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,0.06)}
    .controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-bottom:12px}
    .controls button, .difficulty button{padding:8px 12px;border-radius:8px;border:1px solid #d0d7e0;background:#fff;font-weight:700;cursor:pointer}
    .status{margin-left:auto;font-weight:800}
    .board{display:grid;gap:10px;margin-top:12px}
    .card-item{background:#eee;border-radius:10px;height:80px;display:flex;align-items:center;justify-content:center;font-size:36px;cursor:pointer;user-select:none;position:relative}
    .card-item .face{display:none}
    .card-item.flipped .face, .card-item.matched .face{display:block}
    .card-item.flipped .back{display:none}
    .controls .info{font-size:14px;color:var(--muted); margin-left:8px}

    .difficulty{display:flex;gap:8px;align-items:center}
    .difficulty button.active{background:var(--blue); color:#fff; border-color:var(--blue)}

    @media (max-width:480px){
      .card-item{height:64px;font-size:28px}
    }
  </style>
</head>
<body>

  <header class="topbar">
    <a class="home-link" href="/Game/index.html" aria-label="Home">‚Üê</a>
    <div>ArcadeOwl</div>
  </header>

  <main>
    <div class="card" role="application" aria-label="Emoji Memory game">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
        <div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap">
          <div class="difficulty" aria-hidden="false">
            <button id="easyBtn" class="active" data-diff="easy">Easy</button>
            <button id="medBtn" data-diff="med">Medium</button>
            <button id="hardBtn" data-diff="hard">Hard</button>
          </div>

          <div style="margin-left:8px;">
            <button id="startBtn">Start</button>
            <button id="restartBtn">Restart</button>
          </div>

          <div class="controls" style="margin-left:12px;">
            <div>Moves: <strong><span id="moves">0</span></strong></div>
            <div class="info">Time: <strong><span id="timer">0</span>s</strong></div>
            <div class="info">Best: <strong id="bestMoves">‚Äî</strong></div>
          </div>
        </div>

        <div style="font-size:13px;color:var(--muted)">Choose difficulty, then press Start. Preview will briefly reveal all cards.</div>
      </div>

      <div id="board" class="board" aria-live="polite"></div>

      <div id="results" style="margin-top:12px;color:#333"></div>
    </div>
  </main>

<script>
(function(){
  // Difficulty presets
  const DIFFS = {
    easy:  {cols:4, rows:4, preview:2000}, // 8 pairs
    med:   {cols:5, rows:4, preview:1200}, // 10 pairs
    hard:  {cols:6, rows:6, preview:700}   // 18 pairs
  };

  // Emoji pool (large enough)
  const EMOJIS = ['üçé','üöÄ','üê∂','‚öΩ','üéµ','üåü','üçÄ','üç©','üçì','üê±','üêº','üåà','üçï','üåÆ','üöó','üé≤','üß©','üéØ','üèÄ','üçâ','üçå','üçá','üç™','ü¶Ñ','üëæ','üõ∏','üêµ','üê∏','üê¢','üåô','‚òÄÔ∏è'];

  // DOM
  const boardEl = document.getElementById('board');
  const startBtn = document.getElementById('startBtn');
  const restartBtn = document.getElementById('restartBtn');
  const movesEl = document.getElementById('moves');
  const timerEl = document.getElementById('timer');
  const resultsEl = document.getElementById('results');
  const bestMovesEl = document.getElementById('bestMoves');

  const easyBtn = document.getElementById('easyBtn');
  const medBtn = document.getElementById('medBtn');
  const hardBtn = document.getElementById('hardBtn');

  let difficulty = 'easy';
  let deck = [];
  let flipped = [];
  let matchedCount = 0;
  let moves = 0;
  let seconds = 0;
  let timer = null;
  let running = false;
  let cols = 4, rows = 4;

  function storageKeyFor(diff){ return 'emoji_memory_best_moves_' + diff; }
  function loadBest(){ bestMovesEl.textContent = localStorage.getItem(storageKeyFor(difficulty)) || '‚Äî'; }
  loadBest();

  function setActiveButton(diff){
    difficulty = diff;
    [easyBtn,medBtn,hardBtn].forEach(b => b.classList.toggle('active', b.dataset.diff === diff));
    loadBest();
  }

  easyBtn.addEventListener('click', ()=> setActiveButton('easy'));
  medBtn.addEventListener('click', ()=> setActiveButton('med'));
  hardBtn.addEventListener('click', ()=> setActiveButton('hard'));

  function shuffle(array){
    for(let i = array.length-1; i>0; i--){
      const j = Math.floor(Math.random()*(i+1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }

  function buildDeck(){
    const cfg = DIFFS[difficulty];
    cols = cfg.cols; rows = cfg.rows;
    const pairs = Math.floor((cols*rows)/2);
    // ensure we have enough emoji
    if (pairs > EMOJIS.length) throw new Error('Not enough emoji in pool');
    const chosen = shuffle(EMOJIS.slice()).slice(0, pairs);
    deck = shuffle([...chosen, ...chosen]);
  }

  function renderBoard(){
    boardEl.innerHTML = '';
    boardEl.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
    deck.forEach((emoji, i) => {
      const btn = document.createElement('button');
      btn.className = 'card-item';
      btn.type = 'button';
      btn.setAttribute('data-index', i);
      btn.innerHTML = `<span class="face">${emoji}</span><span class="back">?</span>`;
      boardEl.appendChild(btn);
    });
  }

  function resetGame(){
    stopTimer();
    flipped = [];
    matchedCount = 0;
    moves = 0; seconds = 0;
    movesEl.textContent = 0;
    timerEl.textContent = 0;
    resultsEl.textContent = '';
    buildDeck();
    renderBoard();
    running = false;
    startBtn.disabled = false;
    loadBest();
  }

  function startGame(){
    if (running) return;
    moves = 0; movesEl.textContent = 0;
    matchedCount = 0; flipped = [];
    resultsEl.textContent = '';
    buildDeck();
    renderBoard();

    const preview = DIFFS[difficulty].preview;
    // reveal all briefly
    const cards = Array.from(boardEl.querySelectorAll('.card-item'));
    cards.forEach(c => c.classList.add('flipped'));
    // after preview hide all
    setTimeout(()=> {
      cards.forEach(c => c.classList.remove('flipped'));
      // now start timer and set running
      running = true;
      startBtn.disabled = true;
      timer = setInterval(()=> {
        seconds++;
        timerEl.textContent = seconds;
      }, 1000);
    }, preview);
  }

  function stopTimer(){
    running = false;
    clearInterval(timer);
    timer = null;
    startBtn.disabled = false;
  }

  function gameWin(){
    stopTimer();
    resultsEl.textContent = `You won! Time: ${seconds}s ¬∑ Moves: ${moves}`;
    const key = storageKeyFor(difficulty);
    const best = parseInt(localStorage.getItem(key) || '0', 10);
    if (!best || moves < best) {
      localStorage.setItem(key, moves);
      bestMovesEl.textContent = moves;
      resultsEl.textContent += ' ‚Äî New best!';
    }
  }

  boardEl.addEventListener('click', (e)=>{
    if (!running) return;
    const btn = e.target.closest('.card-item');
    if (!btn) return;
    if (btn.classList.contains('flipped') || btn.classList.contains('matched')) return;
    const idx = Number(btn.dataset.index);

    // flip
    btn.classList.add('flipped');
    flipped.push({ idx, btn });

    if (flipped.length === 2){
      moves++;
      movesEl.textContent = moves;
      const a = deck[flipped[0].idx];
      const b = deck[flipped[1].idx];
      if (a === b){
        flipped[0].btn.classList.add('matched');
        flipped[1].btn.classList.add('matched');
        flipped = [];
        matchedCount += 2;
        if (matchedCount === deck.length) {
          gameWin();
        }
      } else {
        // hide after a short delay
        boardEl.style.pointerEvents = 'none';
        setTimeout(()=> {
          flipped.forEach(f => f.btn.classList.remove('flipped'));
          flipped = [];
          boardEl.style.pointerEvents = '';
        }, 700);
      }
    }
  });

  startBtn.addEventListener('click', startGame);
  restartBtn.addEventListener('click', resetGame);

  // initialize
  resetGame();

})();
</script>
</body>
                                                           </html>
