<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Login â€“ ArcadeOwl</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
</head>
<body>

<h2>Login</h2>

<input id="loginEmail" type="email" placeholder="Email"><br><br>
<input id="loginPassword" type="password" placeholder="Password"><br><br>
<button id="loginBtn">Login</button>

<hr>

<h2>Register</h2>

<input id="regUsername" placeholder="Username"><br><br>
<input id="regEmail" type="email" placeholder="Email"><br><br>
<input id="regPassword" type="password" placeholder="Password"><br><br>
<button id="registerBtn">Register</button>

<p id="msg"></p>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import {
  getAuth,
  signInWithEmailAndPassword,
  createUserWithEmailAndPassword,
  updateProfile,
  onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyA2tHsWgZjPuGXdD90THTbwA_mRLt4D8Q8",
  authDomain: "arcadeowl.firebaseapp.com",
  projectId: "arcadeowl",
  appId: "1:604579422254:web:19ecace88992c998efffbf"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const msg = document.getElementById("msg");

/* ðŸ” LOGIN */
document.getElementById("loginBtn").onclick = async () => {
  try{
    await signInWithEmailAndPassword(
      auth,
      loginEmail.value,
      loginPassword.value
    );
    location.href = "index.html";
  }catch(e){
    msg.textContent = e.message;
  }
};

/* ðŸ†• REGISTER */
document.getElementById("registerBtn").onclick = async () => {
  if(!regUsername.value.trim()){
    msg.textContent = "Username required";
    return;
  }

  try{
    const cred = await createUserWithEmailAndPassword(
      auth,
      regEmail.value,
      regPassword.value
    );

    await updateProfile(cred.user, {
      displayName: regUsername.value.trim()
    });

    location.href = "index.html";
  }catch(e){
    msg.textContent = e.message;
  }
};

/* âœ… SCHON EINGELOGGT? */
onAuthStateChanged(auth, user => {
  if(user) location.href = "index.html";
});
</script>

</body>
</html>
